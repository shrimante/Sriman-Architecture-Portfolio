---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { siteConfig } from '../../config/site';

const title = "Hybrid MuleSoft Platform: RTF on OpenShift";
const teaser = "This reference architecture describes a true hybrid MuleSoft runtime deployed across CloudHub 2.0 and Runtime Fabric (RTF) on OpenShift hosted in the client datacenter, with F5 providing centralized routing, ingress control, and traffic steering between runtime planes. The platform is designed with environment parity across non-production (DEV/TST/STG) and production resilience (PRD/DR).";

const diagram = `graph TD
    Client[External Clients / Mobile / Web] --> F5[F5 Big-IP Load Balancer]
    
    subgraph ControlPlane[MuleSoft Anypoint Platform]
        API_Manager[API Manager]
        Runtime_Manager[Runtime Manager]
    end

    subgraph AWS[AWS Region - CloudHub 2.0]
        CH2_Ingress[CloudHub 2.0 Ingress]
        Exp_API[Experience APIs]
        Sys_API_CH[External System APIs]
        CH2_Ingress --> Exp_API
        Exp_API --> Sys_API_CH
    end

    subgraph OnPrem[On-Premise Data Center]
        OpenShift[Red Hat OpenShift Cluster]
        subgraph RTF[Runtime Fabric]
            RTF_Ingress[RTF Ingress Controller]
            Process_API[Process / Orchestration APIs]
            Sys_API_OP[Internal System APIs]
            RTF_Ingress --> Process_API
            Process_API --> Sys_API_OP
        end
        Backends[(Legacy DB / ERP / Mainframe)]
        Sys_API_OP --> Backends
    end

    F5 -->|External Traffic| CH2_Ingress
    F5 -->|Internal/Secure Traffic| RTF_Ingress
    
    Sys_API_CH -.->|VPN/Direct Connect| RTF_Ingress
    
    ControlPlane -.->|Management| Exp_API
    ControlPlane -.->|Management| Process_API
    ControlPlane -.->|Management| Sys_API_CH
    ControlPlane -.->|Management| Sys_API_OP

    classDef aws fill:#fff7ed,stroke:#f97316,stroke-width:2px,color:#c2410c;
    classDef onprem fill:#fef2f2,stroke:#ef4444,stroke-width:2px,color:#b91c1c;
    classDef control fill:#eff6ff,stroke:#3b82f6,stroke-width:2px,color:#1d4ed8;
    classDef lb fill:#f0fdf4,stroke:#22c55e,stroke-width:2px,color:#15803d;
    
    class AWS aws;
    class OnPrem onprem;
    class ControlPlane control;
    class F5 lb;`;
---

<BaseLayout title={`${title} | Sriman Tirupathy Eshwarappa`}>
  <article class="pt-32 pb-24">
    <div class="container mx-auto px-6 max-w-4xl">
      <a href="/#case-studies" class="inline-flex items-center gap-2 text-accent text-[10px] uppercase font-bold tracking-widest mb-12 hover:translate-x-[-4px] transition-transform">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
        Back to Case Studies
      </a>

      <header class="mb-20">
        <div class="text-[10px] uppercase tracking-[0.2em] font-bold text-accent mb-6">Reference Architecture</div>
        <h1 class="text-4xl md:text-6xl font-bold text-slate-900 mb-8 leading-tight tracking-tighter">{title}</h1>
        <p class="text-xl text-slate-600 leading-relaxed font-outfit">{teaser}</p>
      </header>

      <div class="space-y-20">
        <!-- Diagram Section -->
        <section>
          <div class="bg-white border border-slate-200 rounded-2xl p-8 overflow-x-auto diagram-container shadow-sm mb-12">
            <div class="mermaid min-w-[800px] flex justify-center">
              {diagram}
            </div>
          </div>
        </section>

        <!-- Markdown-style content sections using Tailwind Prose -->
        <div class="bg-white p-10 md:p-16 rounded-3xl border border-slate-200 shadow-sm">
          <div class="prose prose-slate max-w-none 
                      prose-headings:font-bold prose-headings:tracking-tight 
                      prose-h2:text-3xl prose-h2:text-slate-900 prose-h2:border-b prose-h2:border-slate-100 prose-h2:pb-6 prose-h2:mb-8 prose-h2:mt-16 
                      prose-h3:text-xl prose-h3:text-accent prose-h3:mt-10 prose-h3:mb-4
                      prose-p:text-slate-600 prose-p:leading-relaxed 
                      prose-li:text-slate-600 prose-li:marker:text-accent/60
                      prose-strong:text-slate-900 prose-strong:font-semibold">
            
            <h2 class="!mt-0">1) Architectural Principles</h2>
            <ul class="space-y-4">
              <li><strong>Hybrid by design (runtime placement):</strong> Workloads are placed on CloudHub 2.0 or on-prem RTF based on connectivity, compliance, latency, and operational constraints—without compromising consistency in governance, security, and observability.</li>
              <li><strong>Centralized traffic control:</strong> All inbound routing is governed through an enterprise ingress layer (F5) to enforce consistent patterns for exposure, TLS posture, and traffic steering across runtime planes.</li>
              <li><strong>Environment parity:</strong> Non-production mirrors production topology, including routing paths and runtime splits, to prevent production-only failures arising from untested hybrid behavior.</li>
              <li><strong>Operational readiness:</strong> Observability, incident response, and DR runbooks are treated as first-class deliverables and implemented alongside platform build-out.</li>
            </ul>

            <h2>2) Networking Model</h2>

            <h3>2.1 Network Segmentation & Zones</h3>
            <p>The architecture aligns with a zone-based model commonly adopted in enterprise environments:</p>
            <ul>
              <li><strong>Ingress Zone:</strong> External and internal entry points controlled through F5 (VIPs, L7 routing, policy enforcement).</li>
              <li><strong>Runtime Zones:</strong>
                <ul>
                  <li>CloudHub 2.0 runtime plane for suitable API and integration workloads.</li>
                  <li>On-prem RTF runtime plane running in the client datacenter on OpenShift for workloads requiring datacenter locality or stricter controls.</li>
                </ul>
              </li>
              <li><strong>Backend/System Zone:</strong> Enterprise applications, databases, and services accessed via controlled routes and allowlists.</li>
            </ul>
            <p>This structure enables controlled east-west and north-south connectivity while preserving isolation between environments (DEV/TST/STG vs PRD/DR).</p>

            <h3>2.2 Traffic Steering (CloudHub 2.0 vs On-Prem RTF)</h3>
            <p>Traffic is routed to the appropriate runtime plane based on application ownership and exposure model:</p>
            <ul>
              <li>F5 routes API traffic to CloudHub 2.0 or on-prem RTF based on hostname/path rules (or equivalent routing policies).</li>
              <li>Runtime plane selection is explicit and governed; services are not moved between planes without change control.</li>
            </ul>

            <h3>2.3 Connectivity to Enterprise Backends</h3>
            <p>Integrations that require on-prem connectivity follow controlled patterns:</p>
            <ul>
              <li>On-prem RTF accesses datacenter systems directly within allowed security boundaries.</li>
              <li>CloudHub 2.0 accesses enterprise systems through approved connectivity patterns and enterprise network controls, ensuring all access paths remain auditable and governed.</li>
            </ul>

            <h3>2.4 Resilience and Failure Domains</h3>
            <p>The platform is designed to isolate failures:</p>
            <ul>
              <li>CloudHub 2.0 runtime incidents do not directly impair on-prem RTF services and vice-versa.</li>
              <li>F5 provides controlled routing behavior and enables planned maintenance and failover patterns aligned with enterprise practices.</li>
            </ul>

            <h2>3) DNS and Endpoint Strategy</h2>

            <h3>3.1 Endpoint Naming Convention</h3>
            <p>A consistent DNS strategy is used to clearly distinguish environments and reduce routing ambiguity. Dedicated hostnames are utilized per environment, e.g.,</p>
            <ul>
              <li><code>api-dev.&lt;domain&gt;</code> / <code>api-tst.&lt;domain&gt;</code> / <code>api-stg.&lt;domain&gt;</code></li>
              <li><code>api.&lt;domain&gt;</code> (PRD)</li>
              <li><code>api-dr.&lt;domain&gt;</code> (DR)</li>
            </ul>
            <p>This pattern supports clear separation of concerns, environment isolation, and easier automation.</p>

            <h3>3.2 DNS Ownership and Change Control</h3>
            <p>DNS is treated as a controlled enterprise asset:</p>
            <ul>
              <li>DNS entries are managed via defined change processes with audit trails.</li>
              <li>Endpoint naming and cutovers are performed according to release governance and DR procedures.</li>
            </ul>

            <h3>3.3 Routing Independence from DNS (Where Applicable)</h3>
            <p>While DNS provides environment identity, routing decisions remain governed at the ingress layer:</p>
            <ul>
              <li>DNS resolves to controlled entry points, and F5 applies policy-based steering to the correct runtime targets based on approved routing rules.</li>
            </ul>

            <h2>4) Certificates and TLS Termination Model</h2>

            <h3>4.1 TLS Strategy</h3>
            <p>TLS is implemented to satisfy security posture, compliance requirements, and operational simplicity:</p>
            <ul>
              <li>TLS is enforced for all external-facing endpoints.</li>
              <li>Mutual TLS (mTLS) can be applied for sensitive internal integrations where required by policy.</li>
            </ul>

            <h3>4.2 Termination Options and Standard Pattern</h3>
            <p>A consistent TLS posture is maintained across runtime planes:</p>
            <ul>
              <li>Primary termination at the enterprise ingress layer (F5) is typically preferred for centralized certificate lifecycle management and uniform policy enforcement.</li>
              <li>Where end-to-end encryption is required, TLS can be re-established from F5 to the runtime targets, preserving encryption across segments.</li>
            </ul>

            <h3>4.3 Certificate Lifecycle Management</h3>
            <p>Certificate issuance, rotation, and expiry governance are standardized:</p>
            <ul>
              <li>Certificates follow enterprise standards for key strength, validity, and renewal cadence.</li>
              <li>Rotation procedures are documented and tested to avoid service disruption.</li>
            </ul>

            <h3>4.4 Security Controls at the Edge</h3>
            <p>At ingress, the architecture supports consistent application of:</p>
            <ul>
              <li>TLS policy enforcement</li>
              <li>Request filtering and routing controls</li>
              <li>Standard headers and security hardening patterns</li>
              <li>Optional protections aligned to enterprise security tooling and posture</li>
            </ul>

            <h2>5) Deployment Model (Runtime Planes + Environments)</h2>

            <h3>5.1 Environments and Topology</h3>
            <p>The platform is deployed with clear environment separation:</p>
            <ul>
              <li><strong>Non-Production:</strong> DEV, TST, STG — each with hybrid runtime topology (CloudHub 2.0 + on-prem RTF) and F5 routing.</li>
              <li><strong>Production & DR:</strong> PRD and DR — mirrored hybrid topology designed for operational resilience and recoverability.</li>
            </ul>

            <h3>5.2 Application Placement Strategy</h3>
            <p>Applications are placed in one of the runtime planes based on:</p>
            <ul>
              <li>Dependency locality (datacenter systems vs cloud-ready systems)</li>
              <li>Security/compliance requirements</li>
              <li>Performance and latency sensitivity</li>
              <li>Operational constraints and runtime ownership</li>
            </ul>
            <p>This approach avoids a one-size-fits-all runtime and enables pragmatic modernization.</p>

            <h3>5.3 CI/CD and Release Governance (Runtime-Aware Delivery)</h3>
            <p>A standardized CI/CD process is implemented to ensure repeatability across runtime targets:</p>
            <ul>
              <li>Single source of truth for build and packaging</li>
              <li>Automated quality gates (tests, validation, artifact controls)</li>
              <li>Environment promotion model (DEV → TST → STG → PRD) with approvals where required</li>
              <li>Runtime-specific deployment steps encapsulated in pipeline templates to prevent divergence</li>
            </ul>

            <h3>5.4 Configuration and Secret Management</h3>
            <p>Configuration is environment-specific and separated from code:</p>
            <ul>
              <li>Externalized configuration and secure secret handling aligned with enterprise standards</li>
              <li>Clear separation of runtime config for CloudHub 2.0 vs on-prem RTF</li>
              <li>Change control and auditability for configuration updates</li>
            </ul>

            <h3>5.5 DR Readiness and Cutover Approach</h3>
            <p>DR is implemented as an operational capability, not just infrastructure:</p>
            <ul>
              <li>Documented DR procedures for activation and validation</li>
              <li>Defined RTO/RPO assumptions (aligned to enterprise policy)</li>
              <li>Periodic exercises to validate readiness and minimize recovery uncertainty</li>
            </ul>

            <h2>6) Observability Model</h2>

            <h3>6.1 Observability Goals</h3>
            <p>The observability strategy is designed to support:</p>
            <ul>
              <li>Rapid incident detection and triage</li>
              <li>Clear correlation across API layers and downstream dependencies</li>
              <li>Proactive capacity and performance management</li>
              <li>Audit-ready operational telemetry</li>
            </ul>

            <h3>6.2 Metrics (Runtime + Application KPIs)</h3>
            <p>Metrics collection covers both platform health and application behavior:</p>
            <ul>
              <li>Runtime resource and performance metrics (CPU/memory, queueing behavior, thread utilization as applicable)</li>
              <li>API KPIs (latency, error rates, throughput, saturation indicators)</li>
              <li>Dependency metrics (backend response time, error propagation)</li>
            </ul>
            <p>CloudHub 2.0 and on-prem RTF metrics are normalized into a consistent dashboarding approach to enable unified operational posture.</p>

            <h3>6.3 Logging (Structured and Correlated)</h3>
            <p>Logging is standardized across all Mule applications and runtimes:</p>
            <ul>
              <li>Structured logs with consistent schema</li>
              <li>Correlation IDs propagated end-to-end across services</li>
              <li>Standardized error taxonomy for consistent alerting and reporting</li>
              <li>Log routing to centralized platforms such as Splunk/ELK for searching, dashboards, and forensic analysis</li>
            </ul>

            <h3>6.4 Tracing and Transaction Visibility (Where Applicable)</h3>
            <p>Where distributed tracing is required, the architecture supports trace propagation across layers:</p>
            <ul>
              <li>Consistent correlation identifiers at ingress</li>
              <li>Trace context propagation where supported across integrations and downstream calls</li>
              <li>Service-level visibility to reduce mean time to resolution</li>
            </ul>

            <h3>6.5 Alerting and Operational Dashboards</h3>
            <p>Alerting is aligned to operational impact and tuned to reduce noise:</p>
            <ul>
              <li>SLO-based alert thresholds for latency/error rate spikes</li>
              <li>Infrastructure-level alerts for saturation risks</li>
              <li>Environment-specific dashboards (DEV/TST/STG vs PRD/DR) and executive summary dashboards for production oversight</li>
            </ul>

            <h3>6.6 Incident Response and RCA Operating Model</h3>
            <p>Operational processes are codified:</p>
            <ul>
              <li>Incident triage flow including first-response checks and escalation</li>
              <li>Standardized RCA template and known-issue knowledge base</li>
              <li>Post-incident improvements tracked back into platform guardrails and templates</li>
            </ul>

            <h2>7) Governance and Security Baselines (Cross-Cutting)</h2>
            <ul class="space-y-4">
              <li><strong>API Governance:</strong> Lifecycle rules, versioning, and policy baselines are consistently enforced across runtimes.</li>
              <li><strong>Security Controls:</strong> OAuth2/TLS standards, RBAC, and policy-driven enforcement are standardized to ensure consistent posture across environments.</li>
              <li><strong>Operational Controls:</strong> Release governance, change control, and auditability are embedded into platform pipelines and procedures.</li>
            </ul>

          </div>
        </div>

        <section class="pt-12 border-t border-slate-200 mt-24">
          <div class="flex flex-col md:flex-row items-center justify-between gap-12 glass p-12 rounded-[40px] bg-slate-50">
            <div>
              <h3 class="text-2xl font-bold text-slate-900 mb-2">Want the deeper details?</h3>
              <p class="text-slate-600">Download the full architecture artifacts and technical specs.</p>
            </div>
            <div class="flex flex-col sm:flex-row gap-4">
               <a href="#" class="px-6 py-3 bg-white hover:bg-slate-100 border border-slate-200 text-slate-700 text-[10px] uppercase font-bold tracking-widest rounded-lg shadow-sm transition-all">
                 Platform Spec (PDF)
               </a>
               <a href={siteConfig.bookingLink} class="px-6 py-3 bg-accent text-white hover:bg-accent-muted text-[10px] uppercase font-bold tracking-widest rounded-lg transition-all shadow-sm">
                 Request Technical Deep-Dive
               </a>
            </div>
          </div>
        </section>

      </div>
    </div>
  </article>

  <script is:inline type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ 
      startOnLoad: true, 
      theme: 'base',
      themeVariables: {
        primaryColor: '#ffffff',
        primaryTextColor: '#1e293b',
        primaryBorderColor: '#cbd5e1',
        lineColor: '#94a3b8',
        secondaryColor: '#f8fafc',
        tertiaryColor: '#f1f5f9',
        fontFamily: 'system-ui, sans-serif'
      }
    });
  </script>
</BaseLayout>

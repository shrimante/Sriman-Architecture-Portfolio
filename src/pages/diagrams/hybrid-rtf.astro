---
import BaseLayout from '../../layouts/BaseLayout.astro';
---

<BaseLayout>
  <div class="container mx-auto px-6 py-24">
    <div class="mb-12">
      <a href="/#case-studies" class="text-accent hover:text-slate-900 transition-colors text-sm uppercase tracking-widest font-bold mb-8 inline-block">&larr; Back to Portfolio</a>
      <h1 class="text-3xl md:text-5xl font-bold text-slate-900 mb-6 tracking-tighter">Hybrid RTF Architecture</h1>
      <p class="text-slate-600 max-w-2xl text-lg mb-8">
        A generic hybrid architecture topology routing external traffic through an F5 Big-IP Load Balancer to either CloudHub 2.0 or an on-premise OpenShift cluster running MuleSoft Runtime Fabric.
      </p>
      <a href="/case-studies/hybrid-mulesoft-platform-rtf-openshift" class="inline-flex items-center gap-2 px-6 py-3 bg-accent text-white hover:bg-accent-muted text-[10px] uppercase font-bold tracking-widest rounded-lg transition-all shadow-sm group">
        Read Full Case Study
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:translate-x-1 transition-transform"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
      </a>
    </div>

    <div class="bg-white border border-slate-200 shadow-sm rounded-2xl p-8 overflow-x-auto diagram-container">
      <div class="mermaid min-w-[800px] flex justify-center">
        graph TD
          Client[External Clients / Mobile / Web] --> F5[F5 Big-IP Load Balancer]
          
          subgraph ControlPlane[MuleSoft Anypoint Platform]
              API_Manager[API Manager]
              Runtime_Manager[Runtime Manager]
          end

          subgraph AWS[AWS Region - CloudHub 2.0]
              CH2_Ingress[CloudHub 2.0 Ingress]
              Exp_API[Experience APIs]
              Sys_API_CH[External System APIs]
              CH2_Ingress --> Exp_API
              Exp_API --> Sys_API_CH
          end

          subgraph OnPrem[On-Premise Data Center]
              OpenShift[Red Hat OpenShift Cluster]
              subgraph RTF[Runtime Fabric]
                  RTF_Ingress[RTF Ingress Controller]
                  Process_API[Process / Orchestration APIs]
                  Sys_API_OP[Internal System APIs]
                  RTF_Ingress --> Process_API
                  Process_API --> Sys_API_OP
              end
              Backends[(Legacy DB / ERP / Mainframe)]
              Sys_API_OP --> Backends
          end

          F5 -->|External Traffic| CH2_Ingress
          F5 -->|Internal/Secure Traffic| RTF_Ingress
          
          Sys_API_CH -.->|VPN/Direct Connect| RTF_Ingress
          
          ControlPlane -.->|Management| Exp_API
          ControlPlane -.->|Management| Process_API
          ControlPlane -.->|Management| Sys_API_CH
          ControlPlane -.->|Management| Sys_API_OP

          classDef aws fill:#fff7ed,stroke:#f97316,stroke-width:2px,color:#c2410c;
          classDef onprem fill:#fef2f2,stroke:#ef4444,stroke-width:2px,color:#b91c1c;
          classDef control fill:#eff6ff,stroke:#3b82f6,stroke-width:2px,color:#1d4ed8;
          classDef lb fill:#f0fdf4,stroke:#22c55e,stroke-width:2px,color:#15803d;
          
          class AWS aws;
          class OnPrem onprem;
          class ControlPlane control;
          class F5 lb;
      </div>
    </div>
  </div>

  <script is:inline type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ 
      startOnLoad: true, 
      theme: 'base',
      themeVariables: {
        primaryColor: '#ffffff',
        primaryTextColor: '#1e293b',
        primaryBorderColor: '#cbd5e1',
        lineColor: '#94a3b8',
        secondaryColor: '#f8fafc',
        tertiaryColor: '#f1f5f9',
        fontFamily: 'system-ui, sans-serif'
      }
    });
  </script>
</BaseLayout>
